<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>D√©fi de la Vache üêÑ</title>
  <style>
    body { font-family: Arial; background: #e3f2fd; text-align: center; color: #2c3e50; padding: 20px; }
    h1 { color: #2c3e50; }
    iframe { margin: 20px 0; border-radius: 12px; }
    .question { margin: 25px; }
    button { padding: 10px 18px; margin: 6px; border-radius: 8px; cursor: pointer; background: #1976d2; color: white; font-weight: bold; transition: 0.3s; border: none;}
    button:hover { transform: scale(1.05); }
    .effet-correct { animation: pop 0.4s ease; background: #fbc02d !important; color: #2c3e50; }
    @keyframes pop {0%{transform:scale(1);}50%{transform:scale(1.3);}100%{transform:scale(1);} }
    #progressBarContainer { width: 300px; height: 25px; background: #90caf9; margin: 20px auto; border-radius: 20px; overflow: hidden;}
    #progressBar { height: 100%; width: 0%; background: #1976d2; transition: 0.4s ease;}
    #treasure { font-size: 80px; margin-top: 40px; transition: 0.5s;}
    #codeDisplay { font-size: 28px; font-weight: bold; margin-top: 20px; display: none; color: #d32f2f; }
    .opened { transform: scale(1.2) rotate(5deg);}
  </style>
</head>
<body>
<h1>üêÑ D√©fi de la Vache & Tr√©sor</h1>
<p>Regarde la vid√©o puis r√©ponds aux 10 questions pour ouvrir le coffre !</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/VaMQofgjNT8" title="Comment les vaches font du lait" frameborder="0" allowfullscreen></iframe>

<div id="progressBarContainer"><div id="progressBar"></div></div>
<div id="quiz"></div>
<div id="treasure">üîí</div>
<div id="codeDisplay">üéâ Premier chiffre secret : <span id="secretCode"></span></div>

<script>
const questions = [
  {q:"1. Que donnent principalement les vaches ?", options:["Du lait","Du jus de fruit"], correct:"Du lait"},
  {q:"2. Combien de litres de lait une vache peut‚Äëelle produire par jour ?", options:["Environ 25 litres","Seulement 5 litres"], correct:"Environ 25 litres"},
  {q:"3. Pour produire du lait, une vache doit avoir :", options:["Un veau","Un cheval"], correct:"Un veau"},
  {q:"4. Le lait est extrait avec :", options:["Une machine √† traire","Un seau vide"], correct:"Une machine √† traire"},
  {q:"5. Les vaches sont des animaux :", options:["Herbivores","Carnivores"], correct:"Herbivores"},
  {q:"6. Quelle est la couleur la plus fr√©quente des vaches ?", options:["Blanc et noir","Rouge et bleu"], correct:"Blanc et noir"},
  {q:"7. Les vaches mangent principalement :", options:["Herbe","Viande"], correct:"Herbe"},
  {q:"8. Combien de pattes a une vache ?", options:["4","6"], correct:"4"},
  {q:"9. Les vaches produisent du lait apr√®s :", options:["La naissance d‚Äôun veau","Un an de repos"], correct:"La naissance d‚Äôun veau"},
  {q:"10. O√π vit une vache ?", options:["Dans une ferme","Dans une for√™t tropicale"], correct:"Dans une ferme"}
];

let score=0, answered=[];
function shuffle(a){return a.sort(()=>Math.random()-0.5);}
const quizContainer=document.getElementById("quiz");
questions.forEach((item,index)=>{
  const div=document.createElement("div");
  div.classList.add("question"); div.dataset.index=index;
  const p=document.createElement("p"); p.textContent=item.q; div.appendChild(p);
  const shuffled=shuffle([...item.options]);
  shuffled.forEach(opt=>{
    const btn=document.createElement("button"); btn.textContent=opt;
    btn.onclick=()=>answerQuestion(btn,opt); div.appendChild(btn);
  });
  quizContainer.appendChild(div);
});

function answerQuestion(button,value){
  const idx=parseInt(button.closest(".question").dataset.index);
  if(answered[idx]) return;
  if(value===questions[idx].correct){
    score++;
    answered[idx]=true;
    button.classList.add("effet-correct");
    updateProgress();
  } else {
    button.style.background="#c62828"; button.style.color="white";
  }
  if(score===questions.length) openTreasure();
}

function updateProgress(){
  document.getElementById("progressBar").style.width=(score/questions.length*100)+"%";
}

function openTreasure(){
  const chest=document.getElementById("treasure"); chest.textContent="ü™ô"; chest.classList.add("opened");
  document.getElementById("secretCode").textContent=7; 
  document.getElementById("codeDisplay").style.display="block";
}
</script>
</body>
</html>
