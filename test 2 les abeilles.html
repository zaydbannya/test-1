<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>D√©fi des Abeilles üêù</title>
  <style>
    body { font-family: Arial; background: #fff8dc; text-align: center; color: #4e342e; padding: 20px; }
    h1 { color: #6d4c41; }
    iframe { margin: 20px 0; border-radius: 12px; }
    .question { margin: 25px; }
    button { padding: 10px 18px; margin: 6px; border-radius: 8px; cursor: pointer; background: #ffd54f; color: #4e342e; font-weight: bold; transition: 0.3s; border: none;}
    button:hover { transform: scale(1.05); }
    .effet-correct { animation: pop 0.4s ease; background: #4caf50 !important; color: white; }
    @keyframes pop {0%{transform:scale(1);}50%{transform:scale(1.3);}100%{transform:scale(1);} }
    #progressBarContainer { width: 300px; height: 25px; background: #ffe082; margin: 20px auto; border-radius: 20px; overflow: hidden;}
    #progressBar { height: 100%; width: 0%; background: #fbc02d; transition: width 0.4s ease;}
    #treasure { font-size: 80px; margin-top: 40px; transition: 0.5s;}
    #codeDisplay { font-size: 28px; font-weight: bold; margin-top: 20px; display: none; color: #d32f2f; }
    .opened { transform: scale(1.2) rotate(5deg);}
  </style>
</head>
<body>
<h1>üêù D√©fi des Abeilles & Tr√©sor</h1>
<p>Regarde la vid√©o puis r√©ponds aux 10 questions pour ouvrir le coffre !</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/4je67CjobZI" title="Abeilles" frameborder="0" allowfullscreen></iframe>

<div id="progressBarContainer"><div id="progressBar"></div></div>
<div id="quiz"></div>
<div id="treasure">üîí</div>
<div id="codeDisplay">üéâ Troisi√®me chiffre secret : <span id="secretCode"></span></div>

<script>
const questions = [
  {q:"1. Que r√©coltent les abeilles sur les fleurs ?", options:["Nectar","Eau"], correct:"Nectar"},
  {q:"2. Le nectar est transform√© en‚Ä¶", options:["Miel","Lait"], correct:"Miel"},
  {q:"3. O√π les abeilles vivent-elles ?", options:["Dans une ruche","Dans une grotte"], correct:"Dans une ruche"},
  {q:"4. Le miel sert principalement de‚Ä¶", options:["Nourriture","Carburant"], correct:"Nourriture"},
  {q:"5. Les abeilles sont essentielles pour‚Ä¶", options:["La pollinisation","La neige"], correct:"La pollinisation"},
  {q:"6. Combien d'ailes une abeille poss√®de-t-elle ?", options:["4","2"], correct:"4"},
  {q:"7. Les abeilles communiquent par :", options:["La danse","Le chant"], correct:"La danse"},
  {q:"8. Le r√¥le de la reine abeille est de :", options:["Pondre des ≈ìufs","Faire le miel"], correct:"Pondre des ≈ìufs"},
  {q:"9. Les abeilles produisent du miel √† partir de :", options:["Nectar des fleurs","Herbe"], correct:"Nectar des fleurs"},
  {q:"10. Une abeille peut vivre en moyenne :", options:["5-6 semaines","2 ans"], correct:"5-6 semaines"}
];

let score=0, answered=[];
function shuffle(a){return a.sort(()=>Math.random()-0.5);}
const quizContainer=document.getElementById("quiz");
questions.forEach((item,index)=>{
  const div=document.createElement("div");
  div.classList.add("question"); div.dataset.index=index;
  const p=document.createElement("p"); p.textContent=item.q; div.appendChild(p);
  const shuffled=shuffle([...item.options]);
  shuffled.forEach(opt=>{
    const btn=document.createElement("button"); btn.textContent=opt;
    btn.onclick=()=>answerQuestion(btn,opt); div.appendChild(btn);
  });
  quizContainer.appendChild(div);
});

function answerQuestion(button,value){
  const idx=parseInt(button.closest(".question").dataset.index);
  if(answered[idx]) return;
  if(value===questions[idx].correct){
    score++;
    answered[idx]=true;
    button.classList.add("effet-correct");
    updateProgress();
  } else {
    button.style.background="#c62828"; button.style.color="white";
  }
  if(score===questions.length) openTreasure();
}

function updateProgress(){
  document.getElementById("progressBar").style.width=(score/questions.length*100)+"%";
}

function openTreasure(){
  const chest=document.getElementById("treasure"); chest.textContent="ü™ô"; chest.classList.add("opened");
  document.getElementById("secretCode").textContent=5; 
  document.getElementById("codeDisplay").style.display="block";
}
</script>
</body>
</html>
